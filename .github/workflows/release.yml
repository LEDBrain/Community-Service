name: Release workflow
on:
    push:
        branches:
            - main
jobs:
    test:
        name: Test and lint
        uses: LEDBrain/Community-Service/.github/workflows/development.yml@main

    release:
        needs: test
        runs-on: ubuntu-latest
        steps:
            - name: '☁️ checkout repository'
              uses: actions/checkout@v3
              with:
                  fetch-depth: 0
            - name: '🔧 Setup Node.js'
              uses: actions/setup-node@v3
              with:
                  node-version: 'lts/*'
            - name: '📦 install dependencies'
              run: npm ci

            - name: '🚀 release'
              env:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
              run: npx semantic-release
